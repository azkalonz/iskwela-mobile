(this.webpackJsonpIskwela=this.webpackJsonpIskwela||[]).push([[1],{115:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),r=n(30),o=n.n(r),i=n(3),a=n(64),l=(n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(18)),j=n(13),u=(n(96),n(4)),d=n.n(u),b=n(8),f=n(20),h=n(45),O=n(15),m={headerTitle:"",setHeaderTitle:Object(l.b)((function(e,t){e.headerTitle=t}))},p=n(66),x=n.n(p).a.create({baseURL:"https://dev-middleware.iskwela.net/api/"}),g={isLoggedIn:!1,logout:Object(l.b)((function(e){e.isLoggedIn=!1,e.accessToken=""})),login:Object(l.f)(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s,c,r,o,i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.username,c=n.password,r=n.success,o=n.fail,e.prev=1,e.next=4,x.post("login?username=".concat(s,"&password=").concat(c));case 4:return i=e.sent,e.next=7,t.verifyToken({type:i.data.token_type,token:i.data.access_token});case 7:e.sent&&r&&r(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),(a=e.t0).response&&o&&o(a);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),verifyToken:Object(l.f)(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("user?include=preferences",{headers:{Authorization:"".concat(n.type," ").concat(n.token)}});case 2:if(200!==(s=e.sent).status){e.next=7;break}return t.setInfo(s.data),t.setAccessToken(n.token),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),setAccessToken:Object(l.b)((function(e,t){e.accessToken=t})),setInfo:Object(l.b)((function(e,t){e.info=t,e.isLoggedIn=!0})),setIsLoggedIn:Object(l.b)((function(e,t){e.isLoggedIn=t})),getItem:function(e){return e},removeItem:function(e){},setItem:function(e,t){}},y={classes:[],getClasses:Object(l.f)(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s,c,r,o,i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.success,c=n.fail,e.prev=1,r=_.getState().userStorage.accessToken,e.next=5,x.get("student/classes",{headers:{Authorization:"Bearer ".concat(r)}});case 5:200===(o=e.sent).status&&(i=o.data,t.setClasses(i.classes),s&&s(i)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a=e.t0,c&&c(a);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),setClasses:Object(l.b)((function(e,t){e.classes=t}))},v=Object(l.c)({nonPersistent:m,userStorage:Object(l.e)(g,{storage:"localStorage"}),classes:y},{version:1}),k=Object(l.d)(),w=k.useStoreActions,S=(k.useStoreDispatch,k.useStoreState),_=v,I=(n(63),n(115),n(1)),N=function(){var e=Object(j.d)(),t=S((function(e){return e.nonPersistent})).headerTitle,n=Object(s.useRef)(document.createElement("ion-menu"));return Object(I.jsxs)(i.s,{side:"start",menuId:"first",contentId:"router-outlet",id:"class-menu",ref:n,children:[Object(I.jsxs)(i.l,{children:[Object(I.jsxs)(i.A,{children:[Object(I.jsx)(i.c,{onClick:function(){e.replace("/")},color:"transparent",slot:"start",children:Object(I.jsx)("div",{className:"icon-classes",slot:"end",style:{fontSize:20}})}),Object(I.jsx)(i.y,{slot:"start",className:"class-name",children:t}),Object(I.jsx)(i.c,{onClick:function(){n.current.close()},color:"transparent",slot:"end",children:Object(I.jsx)("div",{className:"icon-menu-close",slot:"end",style:{fontSize:20}})})]}),Object(I.jsx)(i.n,{className:"class-cover",src:"https://iskwela.sgp1.digitaloceanspaces.com/SCHOOL01/public/VJP4bYZByPqp7ytutWosgmWHtXfcLKlJ1OqA9qYf.png"}),Object(I.jsxs)(i.x,{className:"class-schedule",children:[Object(I.jsx)(i.j,{children:Object(I.jsx)(i.y,{children:"April 1, 2021"})}),Object(I.jsx)(i.j,{children:Object(I.jsx)(i.y,{children:"10:00 AM - 12:00 PM"})})]})]}),Object(I.jsx)(i.k,{})]})};var E=function(){var e=Object(j.d)(),t=Object(s.useRef)(document.createElement("ion-menu")),n=Object(j.e)();return Object(s.useEffect)((function(){var e,s={"/":"Classes","/class":"English 101","/class/":"English 101"}[n.pathname]||"";t.current.close(),e=s,document.querySelector("#main-header ion-title").innerText=e}),[n]),Object(I.jsxs)(i.s,{side:"start",menuId:"first",contentId:"router-outlet",ref:t,children:[Object(I.jsx)(i.l,{className:"no-shadow",children:Object(I.jsxs)(i.A,{children:[Object(I.jsx)("img",{className:"logo",src:"/logo/logo-full-colored.svg",width:"120",alt:"iSkwela"}),Object(I.jsx)(i.c,{onClick:function(){t.current.close()},color:"transparent",slot:"end",children:Object(I.jsx)(i.m,{icon:O.h,slot:"end",size:"large"})})]})}),Object(I.jsx)(i.k,{children:Object(I.jsx)(i.r,{lines:"none",children:Object(I.jsxs)(i.p,{className:"/"===n.pathname?"selected":"",onClick:function(){e.replace("/")},children:[Object(I.jsx)("div",{className:"icon",children:Object(I.jsx)("div",{className:"icon-classes",slot:"start"})}),Object(I.jsx)(i.q,{children:"Classes"})]})})})]})};function C(){var e;return"has-header "+(null===(e=Object(i.I)())||void 0===e?void 0:e.get("mode"))}var T=function(){var e=Object(i.K)(),t=Object(f.a)(e,1)[0],n=Object(j.d)(),c=Object(j.e)(),r=S((function(e){return e.nonPersistent})).headerTitle,o=S((function(e){return e.userStorage})).info,a=w((function(e){return e.userStorage})).logout,l=Object(s.useRef)(document.querySelector("ion-header")),u=function(){a(),n.replace("/login")},m=Object(s.useCallback)(Object(b.a)(d.a.mark((function e(){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(null===o||void 0===o?void 0:o.first_name)+" "+(null===o||void 0===o?void 0:o.last_name),!Object(i.J)("desktop")){e.next=5;break}t({header:s,buttons:[{icon:O.j,text:"Logout",handler:u}]}),e.next=13;break;case 5:return e.next=7,h.a.showActions({title:s,message:"Options",options:[{title:"Logout"},{title:"Cancel",style:h.b.Destructive}]});case 7:c=e.sent,e.t0=c.index,e.next=0===e.t0?11:13;break;case 11:return n.replace("/login"),e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)}))),[o]);return Object(s.useEffect)((function(){l.current&&("/login"===c.pathname?l.current.style.display="none":l.current.style.display="initial")}),[c]),Object(I.jsxs)(I.Fragment,{children:[c.pathname.indexOf("class")<0?Object(I.jsx)(E,{}):Object(I.jsx)(N,{}),Object(I.jsx)(i.l,{id:"main-header",ref:l,children:Object(I.jsxs)(i.A,{children:[Object(I.jsx)(i.d,{slot:"start",children:Object(I.jsx)(i.t,{autoHide:!1})}),Object(I.jsx)(i.z,{children:r}),Object(I.jsxs)(i.d,{slot:"end",children:[Object(I.jsx)(i.b,{slot:"end",style:{height:30,width:30},children:Object(I.jsx)("img",{src:"https://static.toiimg.com/photo/msid-84340517/84340517.jpg",alt:"Lisa"})}),Object(I.jsx)(i.c,{onClick:m,children:Object(I.jsx)(i.m,{slot:"end",icon:O.c})})]})]})})]})},A=function(){var e=w((function(e){return e.nonPersistent})).setHeaderTitle;return Object(i.O)((function(){e("English 101")})),Object(I.jsx)(i.u,{className:C(),children:Object(I.jsxs)(i.k,{children:[Object(I.jsx)("br",{}),Object(I.jsx)(i.y,{children:"Class Page"})]})})},L=function(e){var t=e.title,n=e.description,s=e.timeStart,c=e.coverImg,r=e.timeEnd,o=e.date,a=e.teacherImg,l=e.teacherName,u=Object(j.d)();return Object(I.jsxs)(i.e,{className:"class",onClick:function(){u.push("/class")},children:[Object(I.jsxs)(i.g,{style:{backgroundImage:'url("'.concat(c,'")')},children:[Object(I.jsx)(i.i,{children:t}),Object(I.jsx)(i.h,{children:n})]}),Object(I.jsxs)(i.f,{children:[Object(I.jsxs)("div",{className:"class-details",children:[Object(I.jsxs)(i.y,{children:[s," - ",r]}),Object(I.jsx)("br",{}),Object(I.jsx)(i.y,{children:o})]}),Object(I.jsx)(i.b,{children:Object(I.jsx)("img",{src:"".concat(a)})}),Object(I.jsx)("div",{className:"class-teacher",children:Object(I.jsx)(i.y,{children:l})})]})]})},P=function(e,t,n){return Object(s.useEffect)((function(){var s;e.current&&((s=e.current).style.pointerEvents="none",n&&n.forEach((function(e){s.querySelectorAll(e).forEach((function(e){e.style.display="none"}))})),t&&t.forEach((function(e){s.querySelectorAll(e).forEach((function(e){var t=e;if(null===e.querySelector(".skeleton-loader")){var n=document.createElement("div");n.classList.add("skeleton-loader"),e.prepend(n),"absolute"!==getComputedStyle(t).position&&(t.style.position="relative",t.style.overflow="hidden!important",t.style.background="none")}}))})))}),[]),null},q=(n(117),function(){var e=Object(i.L)(),t=Object(f.a)(e,1)[0],n=Object(j.d)(),c=function(){var e=S((function(e){return e.userStorage})).isLoggedIn,t=Object(s.useState)(e),n=Object(f.a)(t,2),c=(n[0],n[1]);return Object(s.useEffect)((function(){c(e)}),[e]),e}(),r=w((function(e){return e.nonPersistent})).setHeaderTitle,o=w((function(e){return e.classes})).getClasses,a=Object(s.useState)(),l=Object(f.a)(a,2),u=l[0],d=l[1],b=Object(s.useRef)();P(b,["ion-card-header",".class-details ion-text",".class-teacher ion-text","ion-avatar"],["ion-card-title","ion-card-subtitle"]);return Object(i.O)((function(){r("Classes")}),[]),Object(s.useEffect)((function(){c?o({success:function(e){d(e)},fail:function(e){var n,s;200!==(null===(n=e.response)||void 0===n?void 0:n.status)&&t("Cannot fetch classes [".concat(null===(s=e.response)||void 0===s?void 0:s.status,"]"))}}):n.replace("/login")}),[c]),Object(I.jsx)(i.u,{className:C(),children:Object(I.jsx)(i.k,{fullscreen:!0,children:Object(I.jsxs)("div",{className:"classes",children:[Object(I.jsx)(i.p,{className:"iskwela-theme",children:Object(I.jsx)(i.o,{clearOnEdit:!1,placeholder:"Search",children:Object(I.jsx)(i.c,{slot:"end",onClick:function(){t("Search")},children:Object(I.jsx)(i.m,{icon:O.o})})})}),!u&&Object(I.jsx)("div",{ref:b,style:{width:"100%"},className:"classes",children:new Array(5).fill(0).map((function(e,t){return Object(I.jsx)(L,{title:"",description:"",teacherName:"Teacher Name",teacherImg:"",coverImg:"/class/english.svg",timeStart:"9:00 AM",timeEnd:"10:00 AM",date:"2 September 2021"},t)}))}),u&&u.classes.map((function(e){return Object(I.jsx)(L,{title:e.name,description:e.description,teacherName:e.teacher.first_name+" "+e.teacher.last_name,teacherImg:e.teacher.profile_picture,coverImg:"".concat(e.bg_image),timeStart:e.time_from,timeEnd:e.time_to,date:e.date_from},e.id)}))]})})})}),M=(n(118),function(){var e=Object(j.d)(),t=Object(i.N)(),n=Object(f.a)(t,1)[0],c=Object(i.M)(),r=Object(f.a)(c,2),o=r[0],a=r[1],l=Object(s.useRef)(document.createElement("ion-input")),u=Object(s.useRef)(document.createElement("ion-input")),h=w((function(e){return e.userStorage})),O=(h.setAccessToken,h.login),m=function(){var t=Object(b.a)(d.a.mark((function t(){var s,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=l.current.value+"",c=u.current.value+"",o(),O({username:s,password:c,success:function(){e.push("/"),a()},fail:function(e){e.response&&(401===e.response.status?n("Invalid Username/Password",2e3):n("Something went wrong. Please try again."),a())}});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(I.jsx)(i.u,{id:"login",children:Object(I.jsxs)("div",{className:"login-wrapper",children:[Object(I.jsx)("img",{src:"/assets/icon/logo-single.svg",width:"80"}),Object(I.jsx)("h1",{children:"Sign in to iSkwela"}),Object(I.jsxs)(i.p,{className:"iskwela-theme",children:[Object(I.jsx)(i.q,{position:"floating",children:"Username"}),Object(I.jsx)(i.o,{clearOnEdit:!1,ref:l})]}),Object(I.jsxs)(i.p,{className:"iskwela-theme",children:[Object(I.jsx)(i.q,{position:"floating",children:"Password"}),Object(I.jsx)(i.o,{type:"password",clearOnEdit:!1,ref:u})]}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),Object(I.jsx)(i.c,{color:"secondary",class:"full",onClick:function(){m()},children:"Sign In"})]})})}),D=(n(119),function(){return Object(I.jsx)(i.a,{children:Object(I.jsx)(l.a,{store:_,children:Object(I.jsxs)(a.a,{children:[Object(I.jsx)(T,{}),Object(I.jsxs)(i.w,{id:"router-outlet",children:[Object(I.jsx)(j.a,{exact:!0,path:"/",component:q}),Object(I.jsx)(j.a,{exact:!0,path:"/login",component:M}),Object(I.jsx)(j.a,{exact:!0,path:"/class/:id?",component:A})]})]})})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=function(e){e&&e instanceof Function&&n.e(59).then(n.bind(null,183)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),s(e),c(e),r(e),o(e)}))};o.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(D,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),F()},63:function(e,t,n){},75:function(e,t,n){var s={"./ion-action-sheet.entry.js":[122,5],"./ion-alert.entry.js":[123,6],"./ion-app_8.entry.js":[124,7],"./ion-avatar_3.entry.js":[125,17],"./ion-back-button.entry.js":[126,18],"./ion-backdrop.entry.js":[127,44],"./ion-button_2.entry.js":[128,19],"./ion-card_5.entry.js":[129,20],"./ion-checkbox.entry.js":[130,21],"./ion-chip.entry.js":[131,22],"./ion-col_3.entry.js":[132,45],"./ion-datetime_3.entry.js":[133,10],"./ion-fab_3.entry.js":[134,23],"./ion-img.entry.js":[135,46],"./ion-infinite-scroll_2.entry.js":[136,47],"./ion-input.entry.js":[137,24],"./ion-item-option_3.entry.js":[138,25],"./ion-item_8.entry.js":[139,26],"./ion-loading.entry.js":[140,27],"./ion-menu_3.entry.js":[141,28],"./ion-modal.entry.js":[142,8],"./ion-nav_2.entry.js":[143,14],"./ion-popover.entry.js":[144,9],"./ion-progress-bar.entry.js":[145,29],"./ion-radio_2.entry.js":[146,30],"./ion-range.entry.js":[147,31],"./ion-refresher_2.entry.js":[148,11],"./ion-reorder_2.entry.js":[149,16],"./ion-ripple-effect.entry.js":[150,48],"./ion-route_4.entry.js":[151,32],"./ion-searchbar.entry.js":[152,33],"./ion-segment_2.entry.js":[153,34],"./ion-select_3.entry.js":[154,35],"./ion-slide_2.entry.js":[155,49],"./ion-spinner.entry.js":[156,13],"./ion-split-pane.entry.js":[157,50],"./ion-tab-bar_2.entry.js":[158,36],"./ion-tab_2.entry.js":[159,15],"./ion-text.entry.js":[160,37],"./ion-textarea.entry.js":[161,38],"./ion-toast.entry.js":[162,39],"./ion-toggle.entry.js":[163,12],"./ion-virtual-scroll.entry.js":[164,51]};function c(e){if(!n.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],c=t[0];return n.e(t[1]).then((function(){return n(c)}))}c.keys=function(){return Object.keys(s)},c.id=75,e.exports=c},77:function(e,t,n){var s={"./ion-icon.entry.js":[165,58]};function c(e){if(!n.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],c=t[0];return n.e(t[1]).then((function(){return n(c)}))}c.keys=function(){return Object.keys(s)},c.id=77,e.exports=c},96:function(e,t,n){}},[[120,3,4]]]);
//# sourceMappingURL=main.fb468aa7.chunk.js.map